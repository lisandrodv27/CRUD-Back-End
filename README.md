# CRUD Application Back-End: Historical Profile Compiler

SpringBoot has been utilised to perform the back end functionality of this CRUD application. 

The Profile class lists the three string attributes that will be displayed in the front end (name, nationality and description) as well as a self-generated ID (using Spring annotations). A default constructor sets the attributes of Profile objects to the three string attributes that are created above. This class calls an Entity annotation that will map its specifications into a database table. The Profile class calls setters and getters to be used in the ProfileService class and overrides hashCode and equals methods to obtain a higher test coverage. In the ProfileController class, the back end responses of the ProfileService class are handled. In this class, the CRUD functionality methods are created. ResponseEntity is used to configure the HTTP response of the methods in the ProfileController class. For instance, the create method expects a profile return from the createProfile method in ProfileService with a status code of 201 (created). The RequestBody annotation is used convert profile data from JSON into Java. The read/get method similarly expects a status code of 200 (OK) to display the profile data. The delete/remove method poses a condition that requires an ID to delete a given profile. Using the PathVariable annotation the method variable and URL variable are merged to create the delete response that takes the profile ID. Much like the createProfile method, the updateProfile method requests an object an uses the PathParam annotation to read the ID value in the URI. The response then outputs an updated profile with an ID and expects a status code of 202 (accepted). The ProfileService class deals with the back end functionality. It declares a repository object from the ProfileRepository class, which is used to display the collected profiles as a list (Read), save the newly created ones in the repository (Create), delete profiles by ID (Delete), and update profiles by utilising the setters and getters to create a new, updated object from the old one. This object is then saved and returned as updatedProfile. ProfileRepository is an interface that extends the JpaRepository that allows to save the historical profiles and their ID. A ProfileNotFoundException class is also created to notify the user if the ID does not match with an exisiting profile. 

Regarding testing, this project applies Integration and Unit/Mockito testing and has a total test coverage of 97.2%. The Integration test uses the Sql annotation to link profile-data.sql and profile-schema.sql to test the CRUD methods. To run these files before the test, the execution phase is set to run before the method. This will be done to test the CRUD methods in the database table of historical profiles drawn from the sql files. The readProfileTest instantiates the (unique) profile object used in the sql data file and sets its ID to 1. By creating an array and adding the object, we can then use the object mapper that to convert JSON to a Java string. The get/read method is performed and a status code of 200 (OK) is expected. The createProfileTest method instantiates a newProfile object and uses the ResultMatcher to verify the status code 201 (created) and to check the body of the create request. The deleteProfileTest expects a delete/remove request with an ID of 1 and verifies that the status code of this request is 200 (OK). The updateProfileTest is very much similar to the createProfileTest, yet expects a status code of 202 (accepted) and of course an update/put request. 

The Unit/Mockito test is structured by Given-When-Then stages of code and separated accordingly for improved readibility. The test creates a mock bean repository and verifies that (1) the create method saves items (2) the read/get method displays the (list of) object(s) (3) the object ID is no longer exists after running the delete method (4) (drawing from the updateProfile in the ProfileService class) the update method accordingly identifies the oldProfile and converts it into a newProfile with an ID (i.e an updatedProfile). Finally, the HistoricalProfileApplicationTest aims to improve test coverage by using the EqualsVerifier to test the equals and hashCode methods in the ProfileClass.
